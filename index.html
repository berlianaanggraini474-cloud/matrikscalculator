<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <title>Kalkulator Matriks</title>
  <style>
    body {
      background: linear-gradient(to bottom, #ff69b4, #000000);
      font-family: Arial, sans-serif;
      text-align: center;
      margin: 0;
      padding: 20px;
    }

    h1 {
      color: white;
    }

    .matrix-input {
      display: inline-block;
      margin: 10px;
    }

    .matrix-input input {
      width: 40px;
      height: 40px;
      background-color: #000;
      color: white;
      border: 1px solid #fff;
      text-align: center;
      font-size: 16px;
      margin: 2px;
    }

    .controls {
      margin: 20px auto;
      display: grid;
      grid-template-columns: repeat(2, auto);
      gap: 10px;
      justify-content: center;
    }

    .controls button {
      background-color: yellow;
      border: none;
      padding: 10px;
      font-weight: bold;
      cursor: pointer;
    }

    #hasilContainer {
      margin-top: 20px;
    }

    #hasilContainer table {
      margin: 0 auto;
      border-collapse: collapse;
    }

    #hasilContainer td {
      background-color: black;
      color: white;
      width: 40px;
      height: 40px;
      border: 1px solid white;
      text-align: center;
    }

    label, select, input[type="number"] {
      color: white;
      font-weight: bold;
      margin: 5px;
    }

    input[type="number"] {
      background-color: black;
      color: white;
      width: 40px;
      text-align: center;
      border: 1px solid white;
    }

    #matrix-controls {
      margin: 10px 0;
    }
  </style>
</head>
<body>

  <h1>Kalkulator Matriks</h1>

  <div id="matrix-controls">
    <label>Baris:</label><input type="number" id="baris" value="2" min="1" />
    <label>Kolom:</label><input type="number" id="kolom" value="2" min="1" />
    <button onclick="buatMatrix()">Buat Matriks</button>
  </div>

  <div class="matrix-input" id="matrixA"></div>
  <div class="matrix-input" id="matrixB"></div>

  <div class="controls">
    <button onclick="tambah()">Tambah (A + B)</button>
    <button onclick="kurang()">Kurang (A - B)</button>
    <button onclick="kali()">Kali (A Ã— B)</button>
    <button onclick="transpose('A')">Transpose A</button>
    <button onclick="transpose('B')">Transpose B</button>
    <button onclick="determinan()">Determinan A</button>
    <button onclick="inverse()">Invers A</button>
    <button onclick="bersihkan()">Bersihkan</button>
  </div>

  <div id="hasilContainer">
    <h2 style="color:white;">Hasil</h2>
    <div id="hasil"></div>
  </div>

  <script>
    function buatMatrix() {
      const baris = parseInt(document.getElementById("baris").value);
      const kolom = parseInt(document.getElementById("kolom").value);
      const containerA = document.getElementById("matrixA");
      const containerB = document.getElementById("matrixB");
      containerA.innerHTML = "<div>Matrix A</div>";
      containerB.innerHTML = "<div>Matrix B</div>";
      for (let i = 0; i < baris; i++) {
        for (let j = 0; j < kolom; j++) {
          containerA.innerHTML += `<input type="number" id="A${i}${j}" value="0">`;
          containerB.innerHTML += `<input type="number" id="B${i}${j}" value="0">`;
        }
        containerA.innerHTML += "<br>";
        containerB.innerHTML += "<br>";
      }
    }

    function getMatrix(idPrefix, rows, cols) {
      let matrix = [];
      for (let i = 0; i < rows; i++) {
        let row = [];
        for (let j = 0; j < cols; j++) {
          let val = parseFloat(document.getElementById(idPrefix + i + j).value);
          row.push(val);
        }
        matrix.push(row);
      }
      return matrix;
    }

    function tampilkanHasil(matrix) {
      let html = "<table>";
      for (let i = 0; i < matrix.length; i++) {
        html += "<tr>";
        for (let j = 0; j < matrix[0].length; j++) {
          html += `<td>${Number.isInteger(matrix[i][j]) ? matrix[i][j] : matrix[i][j].toFixed(2)}</td>`;
        }
        html += "</tr>";
      }
      html += "</table>";
      document.getElementById("hasil").innerHTML = html;
    }

    function tambah() {
      const r = parseInt(document.getElementById("baris").value);
      const c = parseInt(document.getElementById("kolom").value);
      const A = getMatrix("A", r, c);
      const B = getMatrix("B", r, c);
      let C = [];
      for (let i = 0; i < r; i++) {
        let row = [];
        for (let j = 0; j < c; j++) {
          row.push(A[i][j] + B[i][j]);
        }
        C.push(row);
      }
      tampilkanHasil(C);
    }

    function kurang() {
      const r = parseInt(document.getElementById("baris").value);
      const c = parseInt(document.getElementById("kolom").value);
      const A = getMatrix("A", r, c);
      const B = getMatrix("B", r, c);
      let C = [];
      for (let i = 0; i < r; i++) {
        let row = [];
        for (let j = 0; j < c; j++) {
          row.push(A[i][j] - B[i][j]);
        }
        C.push(row);
      }
      tampilkanHasil(C);
    }

    function kali() {
      const r = parseInt(document.getElementById("baris").value);
      const c = parseInt(document.getElementById("kolom").value);
      const A = getMatrix("A", r, c);
      const B = getMatrix("B", r, c);
      if (A[0].length !== B.length) return alert("Ordo tidak cocok untuk perkalian");
      let C = [];
      for (let i = 0; i < r; i++) {
        let row = [];
        for (let j = 0; j < c; j++) {
          let sum = 0;
          for (let k = 0; k < c; k++) {
            sum += A[i][k] * B[k][j];
          }
          row.push(sum);
        }
        C.push(row);
      }
      tampilkanHasil(C);
    }

    function transpose(which) {
      const r = parseInt(document.getElementById("baris").value);
      const c = parseInt(document.getElementById("kolom").value);
      const M = getMatrix(which, r, c);
      let T = [];
      for (let i = 0; i < c; i++) {
        let row = [];
        for (let j = 0; j < r; j++) {
          row.push(M[j][i]);
        }
        T.push(row);
      }
      tampilkanHasil(T);
    }

    function determinan() {
      const A = getMatrix("A", 2, 2);
      const det = A[0][0]*A[1][1] - A[0][1]*A[1][0];
      tampilkanHasil([[det]]);
    }

    function inverse() {
      const A = getMatrix("A", 2, 2);
      const det = A[0][0]*A[1][1] - A[0][1]*A[1][0];
      if (det === 0) return alert("Matrix tidak memiliki invers (determinan = 0)");
      const inv = [
        [ A[1][1]/det, -A[0][1]/det ],
        [-A[1][0]/det,  A[0][0]/det ]
      ];
      tampilkanHasil(inv);
    }

    function bersihkan() {
      document.getElementById("hasil").innerHTML = "";
    }

    // Otomatis buat matrix awal 2x2
    window.onload = buatMatrix;
  </script>
</body>
</html>
